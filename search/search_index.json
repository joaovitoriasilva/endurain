{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Endurain A self-hosted fitness tracking service - Mastodon profile - Discord server What is Endurain? Endurain is a self-hosted fitness tracking service designed to give users full control over their data and hosting environment. Built with: Frontend: Vue.js, Notivue and Bootstrap CSS Backend: Python FastAPI, Alembic, SQLAlchemy, stravalib and python-garminconnect for Strava and Garmin Connect integration, gpxpy, tcxreader and fitdecode for .gpx, .tcx and .fit file import respectively Database: MariaDB or PostgreSQL for efficient data management Observability: Jaeger for basic tracing and monitoring To deploy Endurain, a Docker image is available, and a comprehensive example can be found in the \"docker-compose.yml.example\" file provided in the project repository. Configuration is facilitated through environment variables, ensuring flexibility and ease of customization. Developer's Note As a non-professional developer, my journey with Endurain involved learning and implementing new technologies and concepts, with invaluable assistance from ChatGPT. The primary motivation behind this project was to gain hands-on experience and expand my understanding of modern development practices. Second motivation is that I'm an amateur triathlete and I want to keep track of my gear and gear components usage. If you have any recommendations or insights on improving any aspect of Endurain, whether related to technology choices, user experience, or any other relevant area, I would greatly appreciate your input. The goal is to create a reliable and user-friendly fitness tracking solution that caters to the needs of individuals who prefer self-hosted applications. Your constructive feedback will undoubtedly contribute to the refinement of Endurain. Features Endurain currently supports: Multi-user functionality with admin and user profiles adaptable interfaces Activity import via manual or bulk upload (.gpx, .tcx and .fit files. .fit files are preferred) Strava integration for syncing activities and gear Garmin Connect integration for syncing activities, gear and body composition Activity feeds and statistics (week/month) Basic activity privacy settings Gear tracking (wetsuits, bicycles, shoes, racquets, skis, snowboards) Gear component tracking (e.g., track when components like bike chains need replacing) Default gear for activity types User pages with stats and activity histories Follower features (view activities) Multi-language support Imperial and metric units support Dark/light theme switcher Third-party app support Weight logging Notification system Planned Features Upcoming features (in no particular order): Live tracking Activity comments and likes Potential ActivityPub integration Sponsors A huge thank you to the project sponsors! Your support helps keep this project going. Consider sponsoring Endurain on GitHub to ensure continuous development. Contributing Contributions are welcomed! Please open an issue to discuss any changes or improvements before submitting a PR. Check out the Contributing Guidelines for more details. License This project is licensed under the AGPL-3.0 or later License. Help Translate Endurain has multi-language support, and you can help translate it into more languages via Crowdin . Currently supported in: Catalan by @rubenixnagios German by @ThreeCO French (FR) @gwenvador Dutch (NL) @woutvanderaa Portuguese (PT) Spanish (ES) @rgmelkor and @tinchodin English (US) Star History","title":"Home"},{"location":"#what-is-endurain","text":"Endurain is a self-hosted fitness tracking service designed to give users full control over their data and hosting environment. Built with: Frontend: Vue.js, Notivue and Bootstrap CSS Backend: Python FastAPI, Alembic, SQLAlchemy, stravalib and python-garminconnect for Strava and Garmin Connect integration, gpxpy, tcxreader and fitdecode for .gpx, .tcx and .fit file import respectively Database: MariaDB or PostgreSQL for efficient data management Observability: Jaeger for basic tracing and monitoring To deploy Endurain, a Docker image is available, and a comprehensive example can be found in the \"docker-compose.yml.example\" file provided in the project repository. Configuration is facilitated through environment variables, ensuring flexibility and ease of customization.","title":"What is Endurain?"},{"location":"#developers-note","text":"As a non-professional developer, my journey with Endurain involved learning and implementing new technologies and concepts, with invaluable assistance from ChatGPT. The primary motivation behind this project was to gain hands-on experience and expand my understanding of modern development practices. Second motivation is that I'm an amateur triathlete and I want to keep track of my gear and gear components usage. If you have any recommendations or insights on improving any aspect of Endurain, whether related to technology choices, user experience, or any other relevant area, I would greatly appreciate your input. The goal is to create a reliable and user-friendly fitness tracking solution that caters to the needs of individuals who prefer self-hosted applications. Your constructive feedback will undoubtedly contribute to the refinement of Endurain.","title":"Developer's Note"},{"location":"#features","text":"Endurain currently supports: Multi-user functionality with admin and user profiles adaptable interfaces Activity import via manual or bulk upload (.gpx, .tcx and .fit files. .fit files are preferred) Strava integration for syncing activities and gear Garmin Connect integration for syncing activities, gear and body composition Activity feeds and statistics (week/month) Basic activity privacy settings Gear tracking (wetsuits, bicycles, shoes, racquets, skis, snowboards) Gear component tracking (e.g., track when components like bike chains need replacing) Default gear for activity types User pages with stats and activity histories Follower features (view activities) Multi-language support Imperial and metric units support Dark/light theme switcher Third-party app support Weight logging Notification system","title":"Features"},{"location":"#planned-features","text":"Upcoming features (in no particular order): Live tracking Activity comments and likes Potential ActivityPub integration","title":"Planned Features"},{"location":"#sponsors","text":"A huge thank you to the project sponsors! Your support helps keep this project going. Consider sponsoring Endurain on GitHub to ensure continuous development.","title":"Sponsors"},{"location":"#contributing","text":"Contributions are welcomed! Please open an issue to discuss any changes or improvements before submitting a PR. Check out the Contributing Guidelines for more details.","title":"Contributing"},{"location":"#license","text":"This project is licensed under the AGPL-3.0 or later License.","title":"License"},{"location":"#help-translate","text":"Endurain has multi-language support, and you can help translate it into more languages via Crowdin . Currently supported in: Catalan by @rubenixnagios German by @ThreeCO French (FR) @gwenvador Dutch (NL) @woutvanderaa Portuguese (PT) Spanish (ES) @rgmelkor and @tinchodin English (US)","title":"Help Translate"},{"location":"#star-history","text":"","title":"Star History"},{"location":"developer-guide/","text":"Developer guide Setup a dev environment Bellow are the steps to create a dev environment. Examples bellow will use Endurain repo, but you should adapt those for your scenario (forked repo, etc). Clone the repo to your dev machine: $ cd <folder_to_store_code> $ git clone https://github.com/joaovitoriasilva/endurain.git # this will clone the repo structure to the previous folder inside a folder called endurain Docker image and backend logic Make sure Docker is installed, more info here . On the project root folder, create a new Docker image, the example bellow uses unified-image as the image name: $ docker build -f docker/Dockerfile -t unified-image . Go to the project root folder and create a file called docker-compose.yml and adapt it to your needs. Example bellow: services: endurain: container_name: endurain image: unified-image # based on image that will be created above environment: - TZ=Europe/Lisbon # change if needed. Default is UTC - DB_TYPE=postgres - DB_HOST=postgres - DB_PORT=5432 - DB_PASSWORD=changeme - SECRET_KEY=changeme # openssl rand -hex 32 - FERNET_KEY=changeme # https://fernetkeygen.com or python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" - GEOCODES_MAPS_API=changeme - ENDURAIN_HOST=http://localhost:8080 # change if needed - BEHIND_PROXY=false - ENVIRONMENT=development volumes: - <path_to_project_root_folder>/backend/app:/app/backend # this will replace the backend code logic with yours. Any changes in the code need a container reboot for them to apply ports: - \"8080:8080\" # change if needed depends_on: postgres: condition: service_healthy restart: unless-stopped postgres: image: postgres:latest container_name: postgres environment: - POSTGRES_PASSWORD=changeme - POSTGRES_DB=endurain - POSTGRES_USER=endurain - PGDATA=/var/lib/postgresql/data/pgdata ports: - \"5432:5432\" healthcheck: test: [\"CMD-SHELL\", \"pg_isready -U endurain\"] interval: 5s timeout: 5s retries: 5 volumes: - <path_to_container_folders>/postgres:/var/lib/postgresql/data restart: unless-stopped adminer: container_name: adminer image: adminer ports: - 8081:8080 restart: unless-stopped Start your project based on the docker compose file created before: $ docker compose up -d To stop the project: $ docker compose down To remove the create unified-image Docker image: $ docker image remove unified-image Backend uses Poetry for dependency management. You may need to install Python and Poetry if dependency management is necessary. Frontend Make sure you have an up-to-date version of Node.js installed. Go to the root of the project and move to frontend/app folder and install the dependencies: $ cd frontend/app $ npm install Create a file called .env.local inside frontend/app and add the following to it: VITE_ENDURAIN_HOST=http://localhost:8080 # Adapt this based on the docker compose of your dev environment After the dependencies are installed run the frontend: $ npm run dev After the frontend starts running, it should be available in the port 5173 . You should now be able to access the dev environment at http://localhost:5173 . Screenshot bellow shows the output from the npm run dev . Adapt the port based on the command output. Some processes, like token refresh may redirect your dev env from port 5173 to 8080 (or other, depending on your compose file). If this happens simply navigate again to 5173 . API Integration (v0.3.0+) Endurain supports integration with other apps: API Requirements Add a header: Every request must include an X-Client-Type header with either web or mobile as the value. Requests with other values will receive a 403 error. Authorization: Every request must include an Authorization Bearer: <access token> header with a valid (new or refreshed) access token. Token Handling The backend will generate an access_token valid for 15 minutes and an refresh_token valid for 7 days. This follow the logic of short and longed lived tokens for auth session. The access_token is used for authorization; The refresh_token is used to refresh the access_token . For web apps , the backend sends access/refresh tokens as HTTP-only cookies. For mobile apps , tokens are included in the response body. API Endpoints The API is reachable under /api/v1 . Below are some example endpoints. All endpoints information can be checked on the backend docs ( http://localhost:98/docs or http://ip_address:98/docs or https://domain/docs ): What Url Expected Information Authorize /token FORM with the fields username and password . This will be sent in clear text, use of HTTPS is highly recommended Refresh Token /refresh header Authorization Bearer: <Refresh Token> Activity Upload /activities/create/upload .gpx, .tcx, .gz or .fit file Set Weight /health/weight JSON {'weight': , 'created_at': yyyy-MM-dd } Supported activity types The table bellow details the activity types supported by Endurain: Name Value Run 1 Trail run 2 Virtual run 3 Road cycling 4 Gravel cycling 5 MTB cycling 6 Commuting cycling 27 Mixed surface cycling 29 Virtual cycling 7 Indoor cycling 28 Indoor swimming 8 Open water swimming 9 General workout 10 Walk 11 Indoor walk 31 Hike 12 Rowing 13 Yoga 14 Alpine ski 15 Nordic Ski 16 Snowboard 17 Transition 18 Strength Training 19 Crossfit 20 Tennis 21 Table Tennis 22 Badminton 23 Squash 24 Racquetball 25 Pickleball 26 Windsurf 30 Stand up paddling 32 Surf 33 Supported gear types The table bellow details the gear types supported by Endurain: Name Value Notes Bike 1 N/A Shoes 2 N/A Wetsuit 3 N/A Racquet 4 N/A Ski 5 N/A Snowboard 6 N/A Windsurf 7 N/A Water sports board 8 Example: stand up paddle and surf board Supported bike component gear types The table bellow details the bike gear component types supported by Endurain: Value back_break_oil back_break_pads back_break_rotor back_tire back_tube back_tubeless_sealant back_tubeless_rim_tape back_wheel back_wheel_valve bottom_bracket bottle_cage cassette chain computer_mount crank_left_power_meter crank_right_power_meter crankset crankset_power_meter fork frame front_break_oil front_break_pads front_break_rotor front_derailleur front_shifter front_tire front_tube front_tubeless_sealant front_tubeless_rim_tape front_wheel front_wheel_valve grips handlebar handlebar_tape headset pedals pedals_left_power_meter pedals_power_meter pedals_right_power_meter rear_derailleur rear_shifter saddle seatpost stem Supported shoes component gear types The table bellow details the shoes component gear types supported by Endurain: Value cleats insoles laces Supported racquet component gear types The table bellow details the racquet component gear types supported by Endurain: Value basegrip bumpers grommets overgrip strings Supported windsurf component gear types The table bellow details the windsurf component gear types supported by Endurain: Value sail board mast boom mast_extension mast_base mast_universal_joint fin footstraps harness_lines rigging_lines footpad impact_vest lifeguard_vest helmet wing front_foil stabilizer fuselage","title":"Developer guide"},{"location":"developer-guide/#developer-guide","text":"","title":"Developer guide"},{"location":"developer-guide/#setup-a-dev-environment","text":"Bellow are the steps to create a dev environment. Examples bellow will use Endurain repo, but you should adapt those for your scenario (forked repo, etc). Clone the repo to your dev machine: $ cd <folder_to_store_code> $ git clone https://github.com/joaovitoriasilva/endurain.git # this will clone the repo structure to the previous folder inside a folder called endurain","title":"Setup a dev environment"},{"location":"developer-guide/#docker-image-and-backend-logic","text":"Make sure Docker is installed, more info here . On the project root folder, create a new Docker image, the example bellow uses unified-image as the image name: $ docker build -f docker/Dockerfile -t unified-image . Go to the project root folder and create a file called docker-compose.yml and adapt it to your needs. Example bellow: services: endurain: container_name: endurain image: unified-image # based on image that will be created above environment: - TZ=Europe/Lisbon # change if needed. Default is UTC - DB_TYPE=postgres - DB_HOST=postgres - DB_PORT=5432 - DB_PASSWORD=changeme - SECRET_KEY=changeme # openssl rand -hex 32 - FERNET_KEY=changeme # https://fernetkeygen.com or python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" - GEOCODES_MAPS_API=changeme - ENDURAIN_HOST=http://localhost:8080 # change if needed - BEHIND_PROXY=false - ENVIRONMENT=development volumes: - <path_to_project_root_folder>/backend/app:/app/backend # this will replace the backend code logic with yours. Any changes in the code need a container reboot for them to apply ports: - \"8080:8080\" # change if needed depends_on: postgres: condition: service_healthy restart: unless-stopped postgres: image: postgres:latest container_name: postgres environment: - POSTGRES_PASSWORD=changeme - POSTGRES_DB=endurain - POSTGRES_USER=endurain - PGDATA=/var/lib/postgresql/data/pgdata ports: - \"5432:5432\" healthcheck: test: [\"CMD-SHELL\", \"pg_isready -U endurain\"] interval: 5s timeout: 5s retries: 5 volumes: - <path_to_container_folders>/postgres:/var/lib/postgresql/data restart: unless-stopped adminer: container_name: adminer image: adminer ports: - 8081:8080 restart: unless-stopped Start your project based on the docker compose file created before: $ docker compose up -d To stop the project: $ docker compose down To remove the create unified-image Docker image: $ docker image remove unified-image Backend uses Poetry for dependency management. You may need to install Python and Poetry if dependency management is necessary.","title":"Docker image and backend logic"},{"location":"developer-guide/#frontend","text":"Make sure you have an up-to-date version of Node.js installed. Go to the root of the project and move to frontend/app folder and install the dependencies: $ cd frontend/app $ npm install Create a file called .env.local inside frontend/app and add the following to it: VITE_ENDURAIN_HOST=http://localhost:8080 # Adapt this based on the docker compose of your dev environment After the dependencies are installed run the frontend: $ npm run dev After the frontend starts running, it should be available in the port 5173 . You should now be able to access the dev environment at http://localhost:5173 . Screenshot bellow shows the output from the npm run dev . Adapt the port based on the command output. Some processes, like token refresh may redirect your dev env from port 5173 to 8080 (or other, depending on your compose file). If this happens simply navigate again to 5173 .","title":"Frontend"},{"location":"developer-guide/#api-integration-v030","text":"Endurain supports integration with other apps:","title":"API Integration (v0.3.0+)"},{"location":"developer-guide/#api-requirements","text":"Add a header: Every request must include an X-Client-Type header with either web or mobile as the value. Requests with other values will receive a 403 error. Authorization: Every request must include an Authorization Bearer: <access token> header with a valid (new or refreshed) access token.","title":"API Requirements"},{"location":"developer-guide/#token-handling","text":"The backend will generate an access_token valid for 15 minutes and an refresh_token valid for 7 days. This follow the logic of short and longed lived tokens for auth session. The access_token is used for authorization; The refresh_token is used to refresh the access_token . For web apps , the backend sends access/refresh tokens as HTTP-only cookies. For mobile apps , tokens are included in the response body.","title":"Token Handling"},{"location":"developer-guide/#api-endpoints","text":"The API is reachable under /api/v1 . Below are some example endpoints. All endpoints information can be checked on the backend docs ( http://localhost:98/docs or http://ip_address:98/docs or https://domain/docs ): What Url Expected Information Authorize /token FORM with the fields username and password . This will be sent in clear text, use of HTTPS is highly recommended Refresh Token /refresh header Authorization Bearer: <Refresh Token> Activity Upload /activities/create/upload .gpx, .tcx, .gz or .fit file Set Weight /health/weight JSON {'weight': , 'created_at': yyyy-MM-dd }","title":"API Endpoints"},{"location":"developer-guide/#supported-activity-types","text":"The table bellow details the activity types supported by Endurain: Name Value Run 1 Trail run 2 Virtual run 3 Road cycling 4 Gravel cycling 5 MTB cycling 6 Commuting cycling 27 Mixed surface cycling 29 Virtual cycling 7 Indoor cycling 28 Indoor swimming 8 Open water swimming 9 General workout 10 Walk 11 Indoor walk 31 Hike 12 Rowing 13 Yoga 14 Alpine ski 15 Nordic Ski 16 Snowboard 17 Transition 18 Strength Training 19 Crossfit 20 Tennis 21 Table Tennis 22 Badminton 23 Squash 24 Racquetball 25 Pickleball 26 Windsurf 30 Stand up paddling 32 Surf 33","title":"Supported activity types"},{"location":"developer-guide/#supported-gear-types","text":"The table bellow details the gear types supported by Endurain: Name Value Notes Bike 1 N/A Shoes 2 N/A Wetsuit 3 N/A Racquet 4 N/A Ski 5 N/A Snowboard 6 N/A Windsurf 7 N/A Water sports board 8 Example: stand up paddle and surf board","title":"Supported gear types"},{"location":"developer-guide/#supported-bike-component-gear-types","text":"The table bellow details the bike gear component types supported by Endurain: Value back_break_oil back_break_pads back_break_rotor back_tire back_tube back_tubeless_sealant back_tubeless_rim_tape back_wheel back_wheel_valve bottom_bracket bottle_cage cassette chain computer_mount crank_left_power_meter crank_right_power_meter crankset crankset_power_meter fork frame front_break_oil front_break_pads front_break_rotor front_derailleur front_shifter front_tire front_tube front_tubeless_sealant front_tubeless_rim_tape front_wheel front_wheel_valve grips handlebar handlebar_tape headset pedals pedals_left_power_meter pedals_power_meter pedals_right_power_meter rear_derailleur rear_shifter saddle seatpost stem","title":"Supported bike component gear types"},{"location":"developer-guide/#supported-shoes-component-gear-types","text":"The table bellow details the shoes component gear types supported by Endurain: Value cleats insoles laces","title":"Supported shoes component gear types"},{"location":"developer-guide/#supported-racquet-component-gear-types","text":"The table bellow details the racquet component gear types supported by Endurain: Value basegrip bumpers grommets overgrip strings","title":"Supported racquet component gear types"},{"location":"developer-guide/#supported-windsurf-component-gear-types","text":"The table bellow details the windsurf component gear types supported by Endurain: Value sail board mast boom mast_extension mast_base mast_universal_joint fin footstraps harness_lines rigging_lines footpad impact_vest lifeguard_vest helmet wing front_foil stabilizer fuselage","title":"Supported windsurf component gear types"},{"location":"gallery/","text":"Gallery Login page Image can be changed Home page Search page Activity page Activities pages Gears pages Health pages Summary page Profile page Settings pages Users administrator and server settings pages only visible to admin users","title":"Gallery"},{"location":"gallery/#gallery","text":"","title":"Gallery"},{"location":"gallery/#login-page","text":"Image can be changed","title":"Login page"},{"location":"gallery/#home-page","text":"","title":"Home page"},{"location":"gallery/#search-page","text":"","title":"Search page"},{"location":"gallery/#activity-page","text":"","title":"Activity page"},{"location":"gallery/#activities-pages","text":"","title":"Activities pages"},{"location":"gallery/#gears-pages","text":"","title":"Gears pages"},{"location":"gallery/#health-pages","text":"","title":"Health pages"},{"location":"gallery/#summary-page","text":"","title":"Summary page"},{"location":"gallery/#profile-page","text":"","title":"Profile page"},{"location":"gallery/#settings-pages","text":"Users administrator and server settings pages only visible to admin users","title":"Settings pages"},{"location":"getting-started/advanced-started/","text":"Default Credentials Username: admin Password: admin Docker Deployment Endurain provides a Docker image for simplified deployment. To get started, check out the docker-compose.yml.example file in the project repository and adjust it according to your setup. Supported tags are: latest: contains the latest released version; version, example \"v0.3.0\": contains the app state available at the time of the version specified; development version, example \"dev_06092024\": contains a development version of the app at the date specified. This is not a stable released and may contain issues and bugs. Please do not open issues if using a version like this unless asked by me. Supported Environment Variables Table below shows supported environment variables. Variables marked with optional \"No\" should be set to avoid errors. Environment variable Default value Optional Notes UID 1000 Yes User ID for mounted volumes. Default is 1000 GID 1000 Yes Group ID for mounted volumes. Default is 1000 TZ UTC Yes Timezone definition. Useful for TZ calculation for activities that do not have coordinates associated, like indoor swim or weight training. If not specified UTC will be used. List of available time zones here . Format Europe/Lisbon expected ENDURAIN_HOST No default set No Required for internal communication and Strava. For Strava https must be used. Host or local ip (example: http://192.168.1.10:8080 or https://endurain.com) REVERSE_GEO_PROVIDER geocode Yes Defines reverse geo provider. Expects geocode or photon. photon can be the SaaS by komoot or a self hosted version like a self hosted version PHOTON_API_HOST photon.komoot.io Yes API host for photon. By default it uses the SaaS by komoot PHOTON_API_USE_HTTPS true Yes Protocol used by photon. By default uses HTTPS to be inline with what SaaS by komoot expects GEOCODES_MAPS_API changeme Yes Geocode maps offers a free plan consisting of 1 Request/Second. Registration necessary. GEOCODES_MAPS_RATE_LIMIT 1 yes Change this if you have a paid Geocode maps tier DB_TYPE postgres Yes mariadb or postgres DB_HOST postgres Yes mariadb or postgres DB_PORT 5432 Yes 3306 or 5432 DB_USER endurain Yes N/A DB_PASSWORD No default set No N/A DB_DATABASE endurain Yes N/A SECRET_KEY No default set No Run openssl rand -hex 32 on a terminal to get a secret FERNET_KEY No default set No Run python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" on a terminal to get a secret or go to https://fernetkeygen.com . Example output is 7NfMMRSCWcoNDSjqBX8WoYH9nTFk1VdQOdZY13po53Y= ALGORITHM HS256 Yes Currently only HS256 is supported ACCESS_TOKEN_EXPIRE_MINUTES 15 Yes Time in minutes REFRESH_TOKEN_EXPIRE_DAYS 7 Yes Time in days JAEGER_ENABLED false Yes N/A JAEGER_PROTOCOL http Yes N/A JAEGER_HOST jaeger Yes N/A JAEGER_PORT 4317 Yes N/A BEHIND_PROXY false Yes Change to true if behind reverse proxy ENVIRONMENT production Yes \"production\" and \"development\" allowed. \"development\" allows connections from localhost:8080 and localhost:5173 at the CORS level Table below shows the obligatory environment variables for mariadb container. You should set them based on what was also set for the Endurain container. Environemnt variable Default value Optional Notes MYSQL_ROOT_PASSWORD changeme No N/A MYSQL_DATABASE endurain No N/A MYSQL_USER endurain No N/A MYSQL_PASSWORD changeme No N/A Table below shows the obligatory environment variables for postgres container. You should set them based on what was also set for the Endurain container. Environemnt variable Default value Optional Notes POSTGRES_PASSWORD changeme No N/A POSTGRES_DB endurain No N/A POSTGRES_USER endurain No N/A PGDATA /var/lib/postgresql/data/pgdata No N/A To check Python backend dependencies used, use poetry file (pyproject.toml). Frontend dependencies: To check npm dependencies used, use npm file (package.json) Logo created on Canva Volumes Docker image uses a non-root user, so ensure target folders are not owned by root. Non-root user should use UID and GID 1000. It is recommended to configure the following volumes for data persistence: Volume Notes <local_path>/endurain/backend/logs:/app/backend/logs Log files for the backend <local_path>/endurain/backend/data:/app/backend/data Necessary for image and activity files persistence on docker image update Bulk import and file upload To perform a bulk import: - Place .fit, .tcx, .gz and/or .gpx files into the activity_files/bulk_import folder. Create the folder if needed. - In the \"Settings\" menu select \"Integrations\". - Click \"Import\" next to \"Bulk Import\". .fit files are preferred. I noticed that Strava/Garmin Connect process of converting .fit to .gpx introduces additional data to the activity file leading to minor variances in the data, like for example additional meters in distance and elevation gain. Some notes: After the files are processed, the files are moved to the processed folder GEOCODES API has a limit of 1 Request/Second on the free plan, so if you have a large number of files, it might not be possible to import all in the same action The bulk import currently only imports data present in the .fit, .tcx or .gpx files - no metadata or other media are imported. Image personalization It is possible (v0.10.0 or higher) to personalize the login image in the login page. To do that, map the data/server_images directory for image persistence on container updates and: - Set the image in the server settings zone of the settings page - A square image is expected. Default one uses 1000px vs 1000px","title":"Getting started advanced"},{"location":"getting-started/advanced-started/#default-credentials","text":"Username: admin Password: admin","title":"Default Credentials"},{"location":"getting-started/advanced-started/#docker-deployment","text":"Endurain provides a Docker image for simplified deployment. To get started, check out the docker-compose.yml.example file in the project repository and adjust it according to your setup. Supported tags are: latest: contains the latest released version; version, example \"v0.3.0\": contains the app state available at the time of the version specified; development version, example \"dev_06092024\": contains a development version of the app at the date specified. This is not a stable released and may contain issues and bugs. Please do not open issues if using a version like this unless asked by me.","title":"Docker Deployment"},{"location":"getting-started/advanced-started/#supported-environment-variables","text":"Table below shows supported environment variables. Variables marked with optional \"No\" should be set to avoid errors. Environment variable Default value Optional Notes UID 1000 Yes User ID for mounted volumes. Default is 1000 GID 1000 Yes Group ID for mounted volumes. Default is 1000 TZ UTC Yes Timezone definition. Useful for TZ calculation for activities that do not have coordinates associated, like indoor swim or weight training. If not specified UTC will be used. List of available time zones here . Format Europe/Lisbon expected ENDURAIN_HOST No default set No Required for internal communication and Strava. For Strava https must be used. Host or local ip (example: http://192.168.1.10:8080 or https://endurain.com) REVERSE_GEO_PROVIDER geocode Yes Defines reverse geo provider. Expects geocode or photon. photon can be the SaaS by komoot or a self hosted version like a self hosted version PHOTON_API_HOST photon.komoot.io Yes API host for photon. By default it uses the SaaS by komoot PHOTON_API_USE_HTTPS true Yes Protocol used by photon. By default uses HTTPS to be inline with what SaaS by komoot expects GEOCODES_MAPS_API changeme Yes Geocode maps offers a free plan consisting of 1 Request/Second. Registration necessary. GEOCODES_MAPS_RATE_LIMIT 1 yes Change this if you have a paid Geocode maps tier DB_TYPE postgres Yes mariadb or postgres DB_HOST postgres Yes mariadb or postgres DB_PORT 5432 Yes 3306 or 5432 DB_USER endurain Yes N/A DB_PASSWORD No default set No N/A DB_DATABASE endurain Yes N/A SECRET_KEY No default set No Run openssl rand -hex 32 on a terminal to get a secret FERNET_KEY No default set No Run python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" on a terminal to get a secret or go to https://fernetkeygen.com . Example output is 7NfMMRSCWcoNDSjqBX8WoYH9nTFk1VdQOdZY13po53Y= ALGORITHM HS256 Yes Currently only HS256 is supported ACCESS_TOKEN_EXPIRE_MINUTES 15 Yes Time in minutes REFRESH_TOKEN_EXPIRE_DAYS 7 Yes Time in days JAEGER_ENABLED false Yes N/A JAEGER_PROTOCOL http Yes N/A JAEGER_HOST jaeger Yes N/A JAEGER_PORT 4317 Yes N/A BEHIND_PROXY false Yes Change to true if behind reverse proxy ENVIRONMENT production Yes \"production\" and \"development\" allowed. \"development\" allows connections from localhost:8080 and localhost:5173 at the CORS level Table below shows the obligatory environment variables for mariadb container. You should set them based on what was also set for the Endurain container. Environemnt variable Default value Optional Notes MYSQL_ROOT_PASSWORD changeme No N/A MYSQL_DATABASE endurain No N/A MYSQL_USER endurain No N/A MYSQL_PASSWORD changeme No N/A Table below shows the obligatory environment variables for postgres container. You should set them based on what was also set for the Endurain container. Environemnt variable Default value Optional Notes POSTGRES_PASSWORD changeme No N/A POSTGRES_DB endurain No N/A POSTGRES_USER endurain No N/A PGDATA /var/lib/postgresql/data/pgdata No N/A To check Python backend dependencies used, use poetry file (pyproject.toml). Frontend dependencies: To check npm dependencies used, use npm file (package.json) Logo created on Canva","title":"Supported Environment Variables"},{"location":"getting-started/advanced-started/#volumes","text":"Docker image uses a non-root user, so ensure target folders are not owned by root. Non-root user should use UID and GID 1000. It is recommended to configure the following volumes for data persistence: Volume Notes <local_path>/endurain/backend/logs:/app/backend/logs Log files for the backend <local_path>/endurain/backend/data:/app/backend/data Necessary for image and activity files persistence on docker image update","title":"Volumes"},{"location":"getting-started/advanced-started/#bulk-import-and-file-upload","text":"To perform a bulk import: - Place .fit, .tcx, .gz and/or .gpx files into the activity_files/bulk_import folder. Create the folder if needed. - In the \"Settings\" menu select \"Integrations\". - Click \"Import\" next to \"Bulk Import\". .fit files are preferred. I noticed that Strava/Garmin Connect process of converting .fit to .gpx introduces additional data to the activity file leading to minor variances in the data, like for example additional meters in distance and elevation gain. Some notes: After the files are processed, the files are moved to the processed folder GEOCODES API has a limit of 1 Request/Second on the free plan, so if you have a large number of files, it might not be possible to import all in the same action The bulk import currently only imports data present in the .fit, .tcx or .gpx files - no metadata or other media are imported.","title":"Bulk import and file upload"},{"location":"getting-started/advanced-started/#image-personalization","text":"It is possible (v0.10.0 or higher) to personalize the login image in the login page. To do that, map the data/server_images directory for image persistence on container updates and: - Set the image in the server settings zone of the settings page - A square image is expected. Default one uses 1000px vs 1000px","title":"Image personalization"},{"location":"getting-started/getting-started/","text":"Getting started Welcome to the guide for getting started on hosting your own production instance of Endurain. Like many other services, Endurain is easiest to get up and running trough Docker compose. It is possible to get Endurain up and running without a domain and reverse proxy, but this guide assumes you want to use a reverse proxy and your domain. Endurain can run on any computer that support OCI containers, but in this guide we are using Debian 13 (should also work with 12). Prerequisites Domain name pointed to your external IP address. Open FW rules to your server on port 443 and 80. (trough NAT if you are running ipv4) A computer/server with enough disk space for your activity files. API key from geocode.maps.co (free, but need to register). Installing docker and Caddy reverse proxy We use apt to do this sudo apt update -y sudo apt install docker.io docker-compose caddy -y Confirm your user has the id 1000: id If you are not the user 1000, you need to set the UID and GID to your id in the .env file. But to keep this guide as easy to follow as possible, we will assume that you are user 1000. Create directory structure Lets use /opt/endurain/ as the root directory for our project. sudo mkdir /opt/endurain sudo chown 1000:1000 /opt/endurain mkdir -p \\ /opt/endurain/app/{data,logs} \\ /opt/endurain/postgres Docker compose Deployment In this example of setting up Endurain, we will need two files. One docker-compose.yml and .env . docker-compose.yml tells your system how to set up the container, network and storage. .env holds our secrets and environment variables. Splitting up the setup like this make it easy to handle updates to the containers, without touching the secrets and other variables. Creating the docker-compose and .env file To make it as easy as possible for selfhoster to get up and running examples of docker-compose.yml and .env is on the git repo. Here are links to the files on the repo: docker-compose.yml.example .env.example cd /opt/endurain wget https://raw.githubusercontent.com/joaovitoriasilva/endurain/refs/heads/master/docker-compose.yml.example wget https://raw.githubusercontent.com/joaovitoriasilva/endurain/refs/heads/master/.env.example mv docker-compose.yml.example docker-compose.yml mv .env.example .env Now we need to make changes to the files to reflect your environment. Inside docker-compose.yml there is not much we need to do. If you want to store the files another place then /opt/endurain this is the file you need to change. Here is an explaination on what you can set in the .env : Environment variable How to set it DB_PASSWORD Run openssl rand -hex 32 on a terminal to get a secret POSTGRES_PASSWORD Set the same value as DB_PASSWORD. SECRET_KEY Run openssl rand -hex 32 on a terminal to get a secret FERNET_KEY Run python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" on a terminal to get a secret or go to https://fernetkeygen.com . Example output is 7NfMMRSCWcoNDSjqBX8WoYH9nTFk1VdQOdZY13po53Y= GEOCODES_MAPS_API Geocode maps offers a free plan consisting of 1 Request/Second. Registration necessary. TZ Timezone definition. Insert your timezone. List of available time zones here . Format Europe/Lisbon expected ENDURAIN_HOST https://endurain.yourdomain.com BEHIND_PROXY Change to true if behind reverse proxy POSTGRES_DB Postgres name for the database. POSTGRES_USER Postgres user for the database. Please note: POSTGRES_DB and POSTGRES_USER is values for the database. If you change it from endurain, you also need to set the environment variables for the app image. Please leave them as endurain if you are unsure. Start the stack It is finally time to start the stack! cd /opt/endurain sudo docker compose up -d Check the log output: docker compose logs -f If you do not get any errors, continue to next step. Visit the site Visit the site insecurly on http:// IP-OF-YOUR-SERVER :8080 We still can not login to the site, because the ENDURAIN_HOST doesn't match our local URL. Configure Caddy as reverse proxy and get SSL cert from letsencrypt Before we configure caddy you need to set your DNS provider to point your domain to your external IP. You also need to open your firewall on port 443 and 80 to the server. We use caddy outside docker. This way Debian handles the updates (you just need to run sudo apt get update -y and sudo apt get upgrade -y ) Caddy is configured in the file /etc/caddy/Caddyfile Open the file in your favourite editor, delete the default text, and paste in this: endurain.yourdomain.com { reverse_proxy localhost:8080 } Restart caddy sudo systemctl restart caddy Check the ouput of caddy with: sudo journalctl -u caddy You should now be able to access your site on endurain.yourdomain.com Log in with username: admin password: admin, and remember to change the password \ud83c\udf89 Weee \ud83c\udf89 You now have your own instance of Endurain up and running! How to update Take a backup of your files and db. Check for new releases of the container image here . Read release notes carefully for breaking changes. Log on your server and run: Inside /opt/endurain/docker-compose.yml , change out the version tag (the version after : ) cd /opt/endurain sudo docker compose pull sudo docker compose up -d The same is the case for Postgres. Check for breaking changes in release notes on Postgres Website . ** It is generally pretty safe to upgrade postgres minor version f.eks 17.4 to 17.5, but major is often breaking change (example 17.2 to 18.1 ) Things to think about You should implement backup strategy for the following directories: /opt/endurain/app/data /opt/endurain/app/logs You also need to backup your postgres database. It is not good practice to just backup the volume /opt/endurain/postgres this might be corrupted if the database is in the middle of a wright when the database goes down. Default Credentials Username: admin Password: admin","title":"Getting started easy"},{"location":"getting-started/getting-started/#getting-started","text":"Welcome to the guide for getting started on hosting your own production instance of Endurain. Like many other services, Endurain is easiest to get up and running trough Docker compose. It is possible to get Endurain up and running without a domain and reverse proxy, but this guide assumes you want to use a reverse proxy and your domain. Endurain can run on any computer that support OCI containers, but in this guide we are using Debian 13 (should also work with 12).","title":"Getting started"},{"location":"getting-started/getting-started/#prerequisites","text":"Domain name pointed to your external IP address. Open FW rules to your server on port 443 and 80. (trough NAT if you are running ipv4) A computer/server with enough disk space for your activity files. API key from geocode.maps.co (free, but need to register).","title":"Prerequisites"},{"location":"getting-started/getting-started/#installing-docker-and-caddy-reverse-proxy","text":"We use apt to do this sudo apt update -y sudo apt install docker.io docker-compose caddy -y Confirm your user has the id 1000: id If you are not the user 1000, you need to set the UID and GID to your id in the .env file. But to keep this guide as easy to follow as possible, we will assume that you are user 1000.","title":"Installing docker and Caddy reverse proxy"},{"location":"getting-started/getting-started/#create-directory-structure","text":"Lets use /opt/endurain/ as the root directory for our project. sudo mkdir /opt/endurain sudo chown 1000:1000 /opt/endurain mkdir -p \\ /opt/endurain/app/{data,logs} \\ /opt/endurain/postgres","title":"Create directory structure"},{"location":"getting-started/getting-started/#docker-compose-deployment","text":"In this example of setting up Endurain, we will need two files. One docker-compose.yml and .env . docker-compose.yml tells your system how to set up the container, network and storage. .env holds our secrets and environment variables. Splitting up the setup like this make it easy to handle updates to the containers, without touching the secrets and other variables.","title":"Docker compose Deployment"},{"location":"getting-started/getting-started/#creating-the-docker-compose-and-env-file","text":"To make it as easy as possible for selfhoster to get up and running examples of docker-compose.yml and .env is on the git repo. Here are links to the files on the repo: docker-compose.yml.example .env.example cd /opt/endurain wget https://raw.githubusercontent.com/joaovitoriasilva/endurain/refs/heads/master/docker-compose.yml.example wget https://raw.githubusercontent.com/joaovitoriasilva/endurain/refs/heads/master/.env.example mv docker-compose.yml.example docker-compose.yml mv .env.example .env Now we need to make changes to the files to reflect your environment. Inside docker-compose.yml there is not much we need to do. If you want to store the files another place then /opt/endurain this is the file you need to change. Here is an explaination on what you can set in the .env : Environment variable How to set it DB_PASSWORD Run openssl rand -hex 32 on a terminal to get a secret POSTGRES_PASSWORD Set the same value as DB_PASSWORD. SECRET_KEY Run openssl rand -hex 32 on a terminal to get a secret FERNET_KEY Run python -c \"from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())\" on a terminal to get a secret or go to https://fernetkeygen.com . Example output is 7NfMMRSCWcoNDSjqBX8WoYH9nTFk1VdQOdZY13po53Y= GEOCODES_MAPS_API Geocode maps offers a free plan consisting of 1 Request/Second. Registration necessary. TZ Timezone definition. Insert your timezone. List of available time zones here . Format Europe/Lisbon expected ENDURAIN_HOST https://endurain.yourdomain.com BEHIND_PROXY Change to true if behind reverse proxy POSTGRES_DB Postgres name for the database. POSTGRES_USER Postgres user for the database. Please note: POSTGRES_DB and POSTGRES_USER is values for the database. If you change it from endurain, you also need to set the environment variables for the app image. Please leave them as endurain if you are unsure.","title":"Creating the docker-compose and .env file"},{"location":"getting-started/getting-started/#start-the-stack","text":"It is finally time to start the stack! cd /opt/endurain sudo docker compose up -d Check the log output: docker compose logs -f If you do not get any errors, continue to next step.","title":"Start the stack"},{"location":"getting-started/getting-started/#visit-the-site","text":"Visit the site insecurly on http:// IP-OF-YOUR-SERVER :8080 We still can not login to the site, because the ENDURAIN_HOST doesn't match our local URL.","title":"Visit the site"},{"location":"getting-started/getting-started/#configure-caddy-as-reverse-proxy-and-get-ssl-cert-from-letsencrypt","text":"Before we configure caddy you need to set your DNS provider to point your domain to your external IP. You also need to open your firewall on port 443 and 80 to the server. We use caddy outside docker. This way Debian handles the updates (you just need to run sudo apt get update -y and sudo apt get upgrade -y ) Caddy is configured in the file /etc/caddy/Caddyfile Open the file in your favourite editor, delete the default text, and paste in this: endurain.yourdomain.com { reverse_proxy localhost:8080 } Restart caddy sudo systemctl restart caddy Check the ouput of caddy with: sudo journalctl -u caddy You should now be able to access your site on endurain.yourdomain.com Log in with username: admin password: admin, and remember to change the password \ud83c\udf89 Weee \ud83c\udf89 You now have your own instance of Endurain up and running!","title":"Configure Caddy as reverse proxy and get SSL cert from letsencrypt"},{"location":"getting-started/getting-started/#how-to-update","text":"Take a backup of your files and db. Check for new releases of the container image here . Read release notes carefully for breaking changes. Log on your server and run: Inside /opt/endurain/docker-compose.yml , change out the version tag (the version after : ) cd /opt/endurain sudo docker compose pull sudo docker compose up -d The same is the case for Postgres. Check for breaking changes in release notes on Postgres Website . ** It is generally pretty safe to upgrade postgres minor version f.eks 17.4 to 17.5, but major is often breaking change (example 17.2 to 18.1 )","title":"How to update"},{"location":"getting-started/getting-started/#things-to-think-about","text":"You should implement backup strategy for the following directories: /opt/endurain/app/data /opt/endurain/app/logs You also need to backup your postgres database. It is not good practice to just backup the volume /opt/endurain/postgres this might be corrupted if the database is in the middle of a wright when the database goes down.","title":"Things to think about"},{"location":"getting-started/getting-started/#default-credentials","text":"Username: admin Password: admin","title":"Default Credentials"},{"location":"integrations/3rd-party-apps/","text":"3rd party apps RunnerUp Integration RunnerUp an app for tracking your sport activities with your Android phone, can automatically sync your activities recorded with it to your Endurain instance. RunnerUp is supported until version v0.5.3 of Endurain. An issue is opened to get support for v0.6.0+.","title":"3rd party apps"},{"location":"integrations/3rd-party-apps/#3rd-party-apps","text":"","title":"3rd party apps"},{"location":"integrations/3rd-party-apps/#runnerup-integration","text":"RunnerUp an app for tracking your sport activities with your Android phone, can automatically sync your activities recorded with it to your Endurain instance. RunnerUp is supported until version v0.5.3 of Endurain. An issue is opened to get support for v0.6.0+.","title":"RunnerUp Integration"},{"location":"integrations/3rd-party-services/","text":"3rd party services Strava Integration \u26a0\ufe0f Warning Due to recent Strava API changes, expect changes in the Strava integration in a following release. To enable Strava integration, ensure your Endurain instance is accessible from the internet and follow Strava's API setup guide . After the integration is successful the access and refresh tokens are stored in the DB. Each user will have his/hers own pair. Once the integration with Strava is configured, on startup and every hour the backend will check if there is new unimported activities. If yes, the new activity is automatically imported. On link, user will need to provide his/her API client ID and secret. Pair will be temporary stored in the DB until the process finishes. Info is sent on a JSON payload and HTTPS end2end is encouraged. On Strava unlink action every data imported from Strava, i.e. activities and gears, will be deleted according to Strava API Agreement . For Strava integration stravalib Python module is used. Garmin Connect Integration To enable Garmin Connect integration, Endurain will ask for your Garmin Connect credentials. These credentials are not stored, but the authentication tokens (access and refresh tokens) are stored in the DB, similar to the Strava integration. The credentials are sent from the frontend to the backend in plain text, so the use of HTTPS is highly recommended. Once the integration with Garmin Connect is configured, on startup, every one and four hours the backend will check if there is new unimported activities and new body composition entries respectively. If yes, the new data is automatically imported. For Garmin Connect integration python-garminconnect Python module is used.","title":"3rd party services"},{"location":"integrations/3rd-party-services/#3rd-party-services","text":"","title":"3rd party services"},{"location":"integrations/3rd-party-services/#strava-integration","text":"\u26a0\ufe0f Warning Due to recent Strava API changes, expect changes in the Strava integration in a following release. To enable Strava integration, ensure your Endurain instance is accessible from the internet and follow Strava's API setup guide . After the integration is successful the access and refresh tokens are stored in the DB. Each user will have his/hers own pair. Once the integration with Strava is configured, on startup and every hour the backend will check if there is new unimported activities. If yes, the new activity is automatically imported. On link, user will need to provide his/her API client ID and secret. Pair will be temporary stored in the DB until the process finishes. Info is sent on a JSON payload and HTTPS end2end is encouraged. On Strava unlink action every data imported from Strava, i.e. activities and gears, will be deleted according to Strava API Agreement . For Strava integration stravalib Python module is used.","title":"Strava Integration"},{"location":"integrations/3rd-party-services/#garmin-connect-integration","text":"To enable Garmin Connect integration, Endurain will ask for your Garmin Connect credentials. These credentials are not stored, but the authentication tokens (access and refresh tokens) are stored in the DB, similar to the Strava integration. The credentials are sent from the frontend to the backend in plain text, so the use of HTTPS is highly recommended. Once the integration with Garmin Connect is configured, on startup, every one and four hours the backend will check if there is new unimported activities and new body composition entries respectively. If yes, the new data is automatically imported. For Garmin Connect integration python-garminconnect Python module is used.","title":"Garmin Connect Integration"}]}